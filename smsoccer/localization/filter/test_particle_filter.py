# Window size
from time import sleep

from smsoccer.localization.filter.particlefilter import ParticleFilter
from smsoccer.localization.filter import particlefilter
from smsoccer.util.fielddisplay import FieldDisplay


data = [[1.9138558074183545, 31.32223130892581, 209.34178608545565],
        [1.9138558074183545, 31.32223130892581, 209.34178608545565],
        [1.9138558074183545, 31.32223130892581, 209.34178608545565],
        [-49.80295250429013, -6.897113986501982, 148.864754071608],
        [-49.80295250429013, -6.897113986501982, 148.864754071608],
        [-49.80295250429013, -6.897113986501982, 148.864754071608],
        [-49.80295250429013, -6.897113986501982, 148.864754071608],
        [-51.65907745649194, 3.764023857153414, 171.81648720245747],
        [-51.65907745649194, 3.764023857153414, 171.81648720245747],
        [-51.65907745649194, 3.764023857153414, 171.81648720245747],
        [-51.65907745649194, 3.764023857153414, 171.81648720245747],
        [-46.00027352737564, 9.20419837949994, 184.21163444411698],
        [-46.00027352737564, 9.20419837949994, 184.21163444411698],
        [-46.00027352737564, 9.20419837949994, 184.21163444411698],
        [-46.00027352737564, 9.20419837949994, 184.21163444411698],
        [-46.32054517836538, 2.299276548838842, 170.05228404986212],
        [-46.32054517836538, 2.299276548838842, 170.05228404986212],
        [-46.32054517836538, 2.299276548838842, 170.05228404986212],
        [-46.32054517836538, 2.299276548838842, 170.05228404986212],
        [-49.9072107667231, -2.165472860183866, 159.85328672023076],
        [-49.9072107667231, -2.165472860183866, 159.85328672023076],
        [-49.9072107667231, -2.165472860183866, 159.85328672023076],
        [-49.9072107667231, -2.165472860183866, 159.85328672023076],
        [-51.65907745649194, 3.764023857153414, 171.81648720245747],
        [-51.65907745649194, 3.764023857153414, 171.81648720245747],
        [-51.65907745649194, 3.764023857153414, 171.81648720245747],
        [-51.65907745649194, 3.764023857153414, 171.81648720245747],
        [-46.00027352737564, 9.20419837949994, 184.21163444411698],
        [-46.00027352737564, 9.20419837949994, 184.21163444411698],
        [-46.00027352737564, 9.20419837949994, 184.21163444411698],
        [-46.00027352737564, 9.20419837949994, 184.21163444411698],
        [-49.9072107667231, -2.165472860183866, 159.85328672023076],
        [-49.9072107667231, -2.165472860183866, 159.85328672023076],
        [-49.9072107667231, -2.165472860183866, 159.85328672023076],
        [-49.9072107667231, -2.165472860183866, 159.85328672023076],
        [-49.74066350387924, -5.451711906309817, 152.4407068999872],
        [-49.74066350387924, -5.451711906309817, 152.4407068999872],
        [-49.74066350387924, -5.451711906309817, 152.4407068999872],
        [-49.74066350387924, -5.451711906309817, 152.4407068999872],
        [-51.65907745649194, 3.764023857153414, 171.81648720245747],
        [-51.65907745649194, 3.764023857153414, 171.81648720245747],
        [-51.65907745649194, 3.764023857153414, 171.81648720245747],
        [-51.65907745649194, 3.764023857153414, 171.81648720245747],
        [-51.65907745649194, 3.764023857153414, 171.81648720245747],
        [-51.65907745649194, 3.764023857153414, 171.81648720245747],
        [-51.65907745649194, 3.764023857153414, 171.81648720245747],
        [-51.65907745649194, 3.764023857153414, 171.81648720245747],
        [-51.65907745649194, 3.764023857153414, 171.81648720245747],
        [-51.65907745649194, 3.764023857153414, 171.81648720245747],
        [-51.65907745649194, 3.764023857153414, 171.81648720245747],
        [-51.65907745649194, 3.764023857153414, 171.81648720245747],
        [-46.32054517836538, 2.299276548838842, 170.05228404986212],
        [-46.32054517836538, 2.299276548838842, 170.05228404986212],
        [-46.32054517836538, 2.299276548838842, 170.05228404986212],
        [-46.32054517836538, 2.299276548838842, 170.05228404986212],
        [-49.9072107667231, -2.165472860183866, 159.85328672023076],
        [-49.9072107667231, -2.165472860183866, 159.85328672023076],
        [-49.9072107667231, -2.165472860183866, 159.85328672023076],
        [-49.9072107667231, -2.165472860183866, 159.85328672023076],
        [-51.65907745649194, 3.764023857153414, 171.81648720245747],
        [-51.65907745649194, 3.764023857153414, 171.81648720245747],
        [-51.65907745649194, 3.764023857153414, 171.81648720245747],
        [-51.65907745649194, 3.764023857153414, 171.81648720245747],
        [-49.9072107667231, -2.165472860183866, 159.85328672023076],
        [-49.9072107667231, -2.165472860183866, 159.85328672023076],
        [-49.9072107667231, -2.165472860183866, 159.85328672023076],
        [-49.9072107667231, -2.165472860183866, 159.85328672023076],
        [-46.00027352737564, 9.20419837949994, 184.21163444411698],
        [-46.00027352737564, 9.20419837949994, 184.21163444411698],
        [-46.00027352737564, 9.20419837949994, 184.21163444411698],
        [-46.00027352737564, 9.20419837949994, 184.21163444411698],
        [-49.74066350387924, -5.451711906309817, 152.4407068999872],
        [-49.74066350387924, -5.451711906309817, 152.4407068999872],
        [-49.74066350387924, -5.451711906309817, 152.4407068999872],
        [-49.74066350387924, -5.451711906309817, 152.4407068999872],
        [-49.9072107667231, -2.165472860183866, 159.85328672023076],
        [-49.9072107667231, -2.165472860183866, 159.85328672023076],
        [-49.9072107667231, -2.165472860183866, 159.85328672023076],
        [-49.9072107667231, -2.165472860183866, 159.85328672023076],
        [-49.9072107667231, -2.165472860183866, 159.85328672023076],
        [-49.9072107667231, -2.165472860183866, 159.85328672023076],
        [-49.9072107667231, -2.165472860183866, 159.85328672023076],
        [-49.9072107667231, -2.165472860183866, 159.85328672023076],
        [-46.00027352737564, 9.20419837949994, 184.21163444411698],
        [-46.00027352737564, 9.20419837949994, 184.21163444411698],
        [-46.00027352737564, 9.20419837949994, 184.21163444411698],
        [-46.00027352737564, 9.20419837949994, 184.21163444411698],
        [-51.65907745649194, 3.764023857153414, 171.81648720245747],
        [-51.65907745649194, 3.764023857153414, 171.81648720245747],
        [-51.65907745649194, 3.764023857153414, 171.81648720245747],
        [-51.65907745649194, 3.764023857153414, 171.81648720245747],
        [-46.32054517836538, 2.299276548838842, 170.05228404986212],
        [-46.32054517836538, 2.299276548838842, 170.05228404986212],
        [-46.32054517836538, 2.299276548838842, 170.05228404986212],
        [-46.32054517836538, 2.299276548838842, 170.05228404986212],
        [-46.00027352737564, 9.20419837949994, 184.21163444411698],
        [-46.00027352737564, 9.20419837949994, 184.21163444411698],
        [-46.00027352737564, 9.20419837949994, 184.21163444411698],
        [-46.00027352737564, 9.20419837949994, 184.21163444411698],
        [-51.65907745649194, 3.764023857153414, 171.81648720245747],
        [-51.65907745649194, 3.764023857153414, 171.81648720245747],
        [-51.65907745649194, 3.764023857153414, 171.81648720245747],
        [-51.65907745649194, 3.764023857153414, 171.81648720245747],
        [-51.65907745649194, 3.764023857153414, 171.81648720245747],
        [-51.65907745649194, 3.764023857153414, 171.81648720245747],
        [-51.65907745649194, 3.764023857153414, 171.81648720245747],
        [-51.65907745649194, 3.764023857153414, 171.81648720245747],
        [-49.9072107667231, -2.165472860183866, 159.85328672023076],
        [-49.9072107667231, -2.165472860183866, 159.85328672023076],
        [-49.9072107667231, -2.165472860183866, 159.85328672023076],
        [-49.9072107667231, -2.165472860183866, 159.85328672023076],
        [-46.00027352737564, 9.20419837949994, 184.21163444411698],
        [-46.00027352737564, 9.20419837949994, 184.21163444411698],
        [-46.00027352737564, 9.20419837949994, 184.21163444411698],
        [-46.00027352737564, 9.20419837949994, 184.21163444411698],
        [-49.9072107667231, -2.165472860183866, 159.85328672023076],
        [-49.9072107667231, -2.165472860183866, 159.85328672023076],
        [-49.9072107667231, -2.165472860183866, 159.85328672023076],
        [-49.9072107667231, -2.165472860183866, 159.85328672023076],
        [-49.9072107667231, -2.165472860183866, 159.85328672023076],
        [-49.9072107667231, -2.165472860183866, 159.85328672023076],
        [-49.9072107667231, -2.165472860183866, 159.85328672023076],
        [-49.9072107667231, -2.165472860183866, 159.85328672023076],
        [-46.00027352737564, 9.20419837949994, 184.21163444411698],
        [-46.00027352737564, 9.20419837949994, 184.21163444411698],
        [-46.00027352737564, 9.20419837949994, 184.21163444411698],
        [-46.00027352737564, 9.20419837949994, 184.21163444411698],
        [-51.65907745649194, 3.764023857153414, 171.81648720245747],
        [-51.65907745649194, 3.764023857153414, 171.81648720245747],
        [-51.65907745649194, 3.764023857153414, 171.81648720245747]]

if __name__ == "__main__":
    # Ground through
    gt = [-50, 0, -173]
    pf = ParticleFilter(gt)
    # print pf.particles


    # # dash
    # pf.dash_particles(10)
    # print pf.particles, pf.e_position
    # #
    # # #rotate
    # # pf.rotate_particles(30)
    # # print pf.particles, pf.e_position

    display = FieldDisplay()

    for d in data[:]:


        pf.dash_particles(0)

        pf.update_particles(d)
        print pf.e_position, d

        rd = 5

        display.clear()

        # draw particles
        for i in range(particlefilter.N):
            center = pf.particles[i][0], pf.particles[i][1]
            color = (200, 0, 0)
            radio = 2
            display.draw_circle(center, radio, color)

        display.draw_circle(pf.e_position, 5, (0, 0, 200))

        display.show()
        sleep(1)
